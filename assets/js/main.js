// ========================================
// üöÄ ÂÆåÊï¥‰øÆÊ≠£Áâà main.js - Áµ±‰∏ÄÁöÑÊªæÂãïÂ∞éË¶ΩËàáÂàÜÈ†ÅÂäüËÉΩ
// ========================================

// ÂÖ®ÂüüËÆäÊï∏
let currentPage = 1;
let totalPages = 3;
let currentSortOrder = "desc"; // Ë®òÈåÑÁï∂ÂâçÊéíÂ∫èÁãÄÊÖã

// Â∞àÊ°àÂàÜÈ†ÅËÆäÊï∏
let currentProjectPage = 1;
let totalProjectPages = 1;

// ÊªæÂãïÁõ∏ÈóúËÆäÊï∏
let scrollThrottleTimer = null;
let lastScrollTop = 0;

// Ë≠âÁÖßË≥áÊñô
const certifications = [
  {
    id: "cert1",
    modalId: "certModal1",
    image: "assets/images/AI900.png",
    title: {
      key: "certs.ai900_title",
      default: "AI-900: Microsoft Azure AI Fundamentals",
    },
    date: { key: "certs.ai900_date", default: "Issuance date: 2023/06/07" },
    dateValue: "2023/06/07",
  },
  {
    id: "cert2",
    modalId: "certModal2",
    image: "assets/images/AWS.png",
    title: {
      key: "certs.aws_title",
      default: "AWS Cloud Data Analysis and Web Crawler Workshop",
    },
    date: { key: "certs.aws_date", default: "Issuance date: 2023/09/22" },
    dateValue: "2023/09/22",
  },
  {
    id: "cert3",
    modalId: "certModal3",
    image: "assets/images/finance.jpg",
    title: {
      key: "certs.fin_title",
      default: "17th FinTech Competency Certificate",
    },
    date: { key: "certs.fin_date", default: "Issuance date: 2024/04/20" },
    dateValue: "2024/04/20",
  },
  {
    id: "cert4",
    modalId: "certModal4",
    image: "assets/images/TOEIC.jpg",
    title: { key: "certs.toeic_title", default: "TOEIC 815" },
    date: { key: "certs.toeic_date", default: "Issuance date: 2024/04/28" },
    dateValue: "2024/04/28",
  },
  {
    id: "cert5",
    modalId: "certModal5",
    image:
      "assets/images/nvidia_certification_build_rag_agent_selflearning_page-0001.jpg",
    title: {
      key: "certs.nvidia_self_title",
      default: "NVIDIA_Build_With_RAG_Agent_Selflearning",
    },
    date: {
      key: "certs.nvidia_self_date",
      default: "Issuance date: 2025/03/18",
    },
    dateValue: "2025/03/18",
  },
  {
    id: "cert6",
    modalId: "certModal6",
    image:
      "assets/images/nvidia_certification_build_rag_agent_workshop_page-0001.jpg",
    title: {
      key: "certs.nvidia_ws_title",
      default: "NVIDIA_Build_With_RAG_Agent_Workshop",
    },
    date: { key: "certs.nvidia_ws_date", default: "Issuance date: 2025/03/18" },
    dateValue: "2025/03/18",
  },
  {
    id: "cert7",
    modalId: "certModal7",
    image:
      "assets/images/Hsin-Ting_Lu_Generative_AI_With_Diffusion_Model_Certification_page-0001.jpg",
    title: {
      key: "",
      default: "Generative_AI_With_<br />Diffusion_Model_Certification",
    },
    date: {
      key: "certs.nvidia_GenAI_date",
      default: "Issuance date: 2025/04/29",
    },
    dateValue: "2025/04/29",
  },
  {
    id: "cert8",
    modalId: "certModal8",
    image: "assets/images/GA4.png",
    title: { key: "", default: "Google Analytics Certification" },
    date: { key: "certs.GA4_date", default: "Issuance date: 2025/04/29" },
    dateValue: "2025/04/29",
  },
  {
    id: "cert9",
    modalId: "certModal9",
    image:
      "assets/images/GoogleCybersecurityProfessionalCertificateV2_Badge.jpg",
    title: {
      key: "",
      default: "Google_Cybersecurity_<br />Professional_CertificateV2",
    },
    date: {
      key: "certs.cybersecurity_date",
      default: "Issuance date: 2025/05/15",
    },
    dateValue: "2025/05/15",
  },
  {
    id: "cert10",
    modalId: "certModal10",
    image:
      "assets/images/Rapid Application Development with Large Language Models (LLMs).jpg",
    title: {
      key: "",
      default:
        "Rapid Application Development with Large Language Models (LLMs)",
    },
    date: { key: "certs.rapidLLM_date", default: "Issuance date: 2025/06/10" },
    dateValue: "2025/06/10",
  },
  {
    id: "cert11",
    modalId: "certModal11",
    image: "assets/images/AI_Powered_Performance_Ads_Certification.jpg",
    title: {
      key: "",
      default: "AI-Powered Performance Ads Certification",
    },
    date: {
      key: "certs.ai_performance_date",
      default: "Issuance date: 2025/06/12",
    },
    dateValue: "2025/06/12",
  },
  {
    id: "cert12",
    modalId: "certModal12",
    image: "assets/images/AI_Powered_Shopping_Ads_Certification.jpg",
    title: {
      key: "",
      default: "AI-Powered Shopping ads Certification",
    },
    date: {
      key: "certs.ai_shopping_date",
      default: "Issuance date: 2025/06/11",
    },
    dateValue: "2025/06/11",
  },
  {
    id: "cert13",
    modalId: "certModal13",
    image: "assets/images/Google_Ads_Apps_Certification.jpg",
    title: {
      key: "",
      default: "Google Ads Apps Certification",
    },
    date: {
      key: "certs.google_ads_apps_date",
      default: "Issuance date: 2025/06/11",
    },
    dateValue: "2025/06/11",
  },
];

// i18next Ë≥áÊ∫ê
const resources = {
  en: {
    translation: {
      nav: {
        home: "Home",
        education: "Educational Background",
        seminar: "Seminar Presentation",
        certifications: "Certifications",
        projects: "Projects",
        school: "School",
      },
      header: {
        title: "Hsin-Ting Lu",
        tagline:
          "Institute of Information Management, National Taipei University<br><a href='mailto:hsintinglubob@gmail.com'>hsintinglubob@gmail.com</a>",
      },
      main: {
        intro:
          'I am currently studying at the Graduate Institute of Information Management, Taipei University, and working as a research assistant at the <a href="https://www.aifitesg.org/" target="_blank" rel="noopener noreferrer" class="ifit-link"><strong>Intelligent Financial Innovation Technology Lab (IFIT Lab)</strong></a>.',
      },
      section: {
        education: "Educational Background",
        seminar: "Seminar Presentation",
        certifications: "Certifications",
        projects: "Projects",
        school: "School",
      },
      sort: {
        label: "Sort by:",
        desc: "Newest to Oldest",
        asc: "Oldest to Newest",
      },
      footer: {
        contact: "Contact",
        follow: "Follow me",
        textwidget: "Text widget",
        formwidget: "Form widget",
      },
      certs: {
        ai900_title: "AI-900: Microsoft Azure AI Fundamentals",
        ai900_date: "Issuance date: 2023/06/07",
        aws_title: "AWS Cloud Data Analysis and Web Crawler Workshop",
        aws_date: "Issuance date: 2023/09/22",
        fin_title: "17th FinTech Competency Certificate",
        fin_date: "Issuance date: 2024/04/20",
        toeic_title: "TOEIC 815",
        toeic_date: "Issuance date: 2024/04/28",
        nvidia_self_title: "NVIDIA_Build_With_ RAG_Agent_Selflearning",
        nvidia_self_date: "Issuance date: 2025/03/18",
        nvidia_ws_title: "NVIDIA_Build_With_ RAG_Agent_Workshop",
        nvidia_ws_date: "Issuance date: 2025/03/18",
        nvidia_GenAI_date: "Issuance date: 2025/04/29",
        GA4_date: "Issuance date: 2025/04/29",
        cybersecurity_date: "Issuance date: 2025/05/15",
        rapidLLM_date: "Issuance date: 2025/06/10",
        ai_performance_date: "Issuance date: 2025/06/12",
        ai_shopping_date: "Issuance date: 2025/06/11",
        google_ads_apps_date: "Issuance date: 2025/06/11",
        total_count: "Total Certifications:",
      },
      projects: {
        total_count: "Total Projects:",
      },
      seminar: {
        title1: "International Quality Management Seminar",
        date1: "Issuance date: 2023/11/18",
        title2:
          "IMP2024 ‚Äî The 29th Workshop on Information Management & Practice",
        date2: "Issuance date: 2024/11/21",
        title3:
          "The Journal of Quality has accepted the manuscript for publication",
        date3: "Accepted Date: 2024/08/31",
      },
      education: {
        fju_title: "Fu Jen Catholic University's 40th Outstanding Projects",
        fju_date: "Issuance date: 2023/05/27",
        innohack_title: "2023 Ruiyang Information Hackathon Competition",
        innohack_date: "Issuance date: 2023/09/13",
        ict_title: "28th Intercollegiate ICT Innovation Competition",
        ict_date: "Issuance date: 2023/11/04",
        iii_title: "III Technology Day",
        iii_date: "Participation date: 2024/11/07",
      },
      page: {
        current: "Page",
        of: "of",
        total: "",
        jump: "Go to",
        page: "",
        go: "GO",
      },
      esg: {
        nav: {
          back: "Back to Home",
          introduction: "Introduction",
          timeline: "Timeline",
          process: "Process",
          languages: "Languages",
          highlights: "Highlights",
        },
        header: {
          title: "ML-ESG Compliance Report",
          subtitle: "ESG Compliance Report - Chinese Dataset Annotation Task",
          project: "NTCIR-19 2025-2026 International Research Project",
        },
        introduction: {
          title: "ACTIVITY INTRODUCTION",
          description:
            "We plan to participate in the <strong>ML-ESG Compliance Report</strong> Chinese dataset annotation task, which is an international collaborative research project aimed at advancing ESG automated detection technology.",
          team_label: "Participating Teams:",
          team_members:
            "Japanese Team, National Taiwan University, National Taipei University",
          duration_label: "Project Duration:",
          duration: "March 1, 2025 - May 31, 2025 (90-day annotation period)",
          importance_title: "Why is ESG Compliance Important?",
          stat1:
            "<strong>69% of investment companies</strong> have incorporated ESG standards into their regulatory compliance strategies",
          stat2:
            "Among the top 250 global companies, <strong>96% have conducted ESG reporting</strong>",
          stat3:
            "In 2022, <strong>86% of global asset managers</strong> have integrated sustainable investing into their investment strategies",
          stat4:
            "<strong>97% of asset managers</strong> in the Asia-Pacific region have adopted ESG strategies",
          trends_title: "Three Major Global ESG Trends",
          trend1_title: "ESG Integration into Corporate Operations",
          trend1_desc:
            "More companies are incorporating ESG principles into their daily operations",
          trend2_title: "Climate Change Response",
          trend2_desc:
            "Companies are adopting more proactive environmental measures to address global warming",
          trend3_title: "Increasingly Strict Regulatory Framework",
          trend3_desc:
            "Governments and international organizations continue to strengthen ESG regulations",
        },
        timeline: {
          title: "PROJECT TIMELINE",
          meeting: "2025/02/26 (Wed) 20:30-21:00",
          meeting_desc: "First Online Discussion Meeting - ML-ESG CR 2026",
          labeling: "2025/03/01 - 2025/05/31 (90 Days)",
          labeling_desc:
            "<strong>Data Annotation Phase</strong> - ESG reporting standards and data annotation work",
          completion: "2025/06 - 2025/07",
          completion_desc:
            "Complete ESG report annotation and establish precise ESG data models",
          conference: "2026/12",
          conference_desc:
            "Participate in NTCIR-19 International Conference and present research findings",
        },
        process: {
          title: "DATA LABELING PROCESS",
          step: "Step",
          task: "Task",
          description: "Description",
          step1_task: "Confirm ESG Indicator Location",
          step1_desc: "Confirm the pages where ESG indicators appear",
          step2_task: "Indicator Classification",
          step2_desc:
            "Quantitative data (numbers, percentages) or discussion/analysis (text description)",
          step3_task: "Unit Verification",
          step3_desc:
            "Percentage (%), currency ($), text description, or other data types",
          step4_task: "Compliance Confirmation",
          step4_desc: "Ensure ESG reports comply with regulatory requirements",
        },
        languages: {
          title: "MULTI-LANGUAGE SUPPORT",
          english: "English",
          french: "French",
          korean: "Korean",
          chinese: "Chinese",
          japanese: "Japanese",
          thai: "Thai",
        },
        highlights: {
          title: "RESEARCH HIGHLIGHTS",
          analysis_title: "ESG Data Analysis",
          analysis_desc: "In-depth analysis of corporate ESG report compliance",
          ai_title: "AI Automated Detection",
          ai_desc: "Using machine learning technology for automated detection",
          cooperation_title: "International Cooperation",
          cooperation_desc:
            "Joint research and development with multinational teams",
          ntcir_title: "NTCIR Certification",
          ntcir_desc:
            "International top-tier information retrieval evaluation conference",
        },
        cta: {
          title:
            "Interested in participating in international collaborative research projects?",
          subtitle: "Welcome to join the ML-ESG CR 2026 research team",
          button: "Visit NLPFin Official Website",
        },
        footer: {
          copyright: "ML-ESG Compliance Report ¬© 2025 | NTCIR-19 2025-2026",
          team: "Research Team: NLPFin (Natural Language Processing Finance Research Group) | Official Website:",
        },
      },
    },
  },
  zh: {
    translation: {
      nav: {
        home: "È¶ñÈ†ÅHome",
        education: "Â≠∏ÁøíÁ∂ìÊ≠∑",
        seminar: "Á†îË®éÊúÉÁôºË°®",
        certifications: "Ë≠âÊõ∏",
        projects: "Ë®àÁï´",
        school: "Â∞±ËÆÄÂ≠∏Ê†°",
      },
      header: {
        title: "Hsin-Ting Lu",
        tagline:
          "ÂúãÁ´ãËá∫ÂåóÂ§ßÂ≠∏Ë≥áË®äÁÆ°ÁêÜÁ†îÁ©∂ÊâÄ<br><a href='mailto:hsintinglubob@gmail.com'>hsintinglubob@gmail.com</a>",
      },
      main: {
        intro:
          'ÊàëÁõÆÂâçÂ∞±ËÆÄÊñºËá∫ÂåóÂ§ßÂ≠∏Ë≥áË®äÁÆ°ÁêÜÁ†îÁ©∂ÊâÄÔºå‰∏¶Êñº<a href="https://www.aifitesg.org/" target="_blank" rel="noopener noreferrer" class="ifit-link"><strong>Êô∫ÊÖßÈáëËûçÂâµÊñ∞ÁßëÊäÄÂØ¶È©óÂÆ§ (IFIT Lab)</strong></a> Êìî‰ªªÁ†îÁ©∂Âä©ÁêÜ„ÄÇ',
      },
      section: {
        education: "Â≠∏ÁøíÁ∂ìÊ≠∑",
        seminar: "Á†îË®éÊúÉÁôºË°®",
        certifications: "Ë≠âÊõ∏",
        projects: "Ë®àÁï´",
        school: "Â∞±ËÆÄÂ≠∏Ê†°",
      },
      sort: {
        label: "ÊéíÂ∫èÊñπÂºè:",
        desc: "Êñ∞Âà∞Ëàä",
        asc: "ËàäÂà∞Êñ∞",
      },
      footer: {
        contact: "ËÅØÁµ°Ë≥áË®ä",
        follow: "ËøΩËπ§Êàë",
        textwidget: "ÊñáÂ≠óÊ®°ÁµÑ",
        formwidget: "Ë°®ÂñÆÊ®°ÁµÑ",
      },
      certs: {
        ai900_title: "AI-900: ÂæÆËªü Azure AI Âü∫Á§éË≠âÁÖß",
        ai900_date: "ÁôºË≠âÊó•Êúü: 2023/06/07",
        aws_title: "AWSÈõ≤Á´ØÊï∏ÊìöÂàÜÊûêËàáÁà¨Ëü≤Â∑•‰ΩúÂùä",
        aws_date: "ÁôºË≠âÊó•Êúü: 2023/09/22",
        fin_title: "Á¨¨17Â±Ü ÈáëËûçÁßëÊäÄÂäõË≠âÁÖß",
        fin_date: "ÁôºË≠âÊó•Êúü: 2024/04/20",
        toeic_title: "Â§öÁõä815ÂàÜ",
        toeic_date: "ÁôºË≠âÊó•Êúü: 2024/04/28",
        nvidia_self_title: "NVIDIA_Build_With_ RAG_Agent_Selflearning",
        nvidia_self_date: "ÁôºË≠âÊó•Êúü: 2025/03/18",
        nvidia_ws_title: "NVIDIA_Build_With_ RAG_Agent_Workshop",
        nvidia_ws_date: "ÁôºË≠âÊó•Êúü: 2025/03/18",
        nvidia_GenAI_date: "ÁôºË≠âÊó•Êúü: 2025/04/29",
        GA4_date: "ÁôºË≠âÊó•Êúü: 2025/04/29",
        cybersecurity_date: "ÁôºË≠âÊó•Êúü: 2025/05/15",
        rapidLLM_date: "ÁôºË≠âÊó•Êúü: 2025/06/10",
        ai_performance_date: "ÁôºË≠âÊó•Êúü: 2025/06/12",
        ai_shopping_date: "ÁôºË≠âÊó•Êúü: 2025/06/11",
        google_ads_apps_date: "ÁôºË≠âÊó•Êúü: 2025/06/11",
        total_count: "Ë≠âÁÖßÁ∏ΩÊï∏Ôºö",
      },
      projects: {
        total_count: "Â∞àÊ°àÁ∏ΩÊï∏Ôºö",
      },
      seminar: {
        title1: "ÂúãÈöõÂìÅË≥™ÁÆ°ÁêÜÁ†îË®éÊúÉ",
        date1: "ÁôºË≠âÊó•Êúü: 2023/11/18",
        title2: "IMP2024Á¨¨29Â±ÜË≥áË®äÁÆ°ÁêÜÊö®ÂØ¶ÂãôÁ†îË®éÊúÉ",
        date2: "ÁôºË≠âÊó•Êúü: 2024/11/21",
        title3: "ÂìÅË≥™Â≠∏Â†±Êé•ÂèóÁ®ø‰ª∂ÂàäÁôª",
        date3: "Êé•ÂèóÊó•Êúü: 2024/08/31",
      },
      education: {
        fju_title: "Ëºî‰ªÅÂ§ßÂ≠∏Á¨¨40Â±ÜÂÑ™ÁßÄÂ∞àÈ°å",
        fju_date: "ÁôºË≠âÊó•Êúü: 2023/05/27",
        innohack_title: "2023Âè°ÊèöË≥áË®äÈªëÂÆ¢ÊùæÁ´∂Ë≥Ω",
        innohack_date: "ÁôºË≠âÊó•Êúü: 2023/09/13",
        ict_title: "Á¨¨28Â±ÜÂ§ßÂ∞àÈô¢Ê†°Ë≥áË®äÊáâÁî®ÊúçÂãôÂâµÊñ∞Á´∂Ë≥Ω",
        ict_date: "ÁôºË≠âÊó•Êúü: 2023/11/04",
        iii_title: "Ë≥áÁ≠ñÊúÉÁßëÊäÄÊó•",
        iii_date: "ÂèÉÂä†Êó•Êúü: 2024/11/07",
      },
      page: {
        current: "Á¨¨",
        of: "È†ÅÔºåÂÖ±",
        total: "È†Å",
        jump: "Ë∑≥Ëá≥",
        page: "È†Å",
        go: "GO",
      },
      esg: {
        nav: {
          back: "ËøîÂõûÈ¶ñÈ†Å",
          introduction: "Ê¥ªÂãï‰ªãÁ¥π",
          timeline: "Â∞àÊ°àÊôÇÁ®ã",
          process: "Ê®ôË®ªÊµÅÁ®ã",
          languages: "Â§öË™ûË®ÄÊîØÊè¥",
          highlights: "Á†îÁ©∂ÈáçÈªû",
        },
        header: {
          title: "ML-ESG Compliance Report",
          subtitle: "ESG ÂêàË¶èÊÄßÂ†±Âëä - ‰∏≠ÊñáÁâàÊú¨Ë≥áÊñôÈõÜÊ®ôË®ª‰ªªÂãô",
          project: "NTCIR-19 2025-2026 ÂúãÈöõÁ†îÁ©∂Ë®àÁï´",
        },
        introduction: {
          title: "ACTIVITY INTRODUCTION Ê¥ªÂãï‰ªãÁ¥π",
          description:
            "ÊàëÂÄëÈ†êË®àÂèÉËàá <strong>ML-ESG Compliance Report (ESG ÂêàË¶èÊÄßÂ†±Âëä)</strong> ‰∏≠ÊñáÁâàÊú¨Ë≥áÊñôÈõÜÊ®ôË®ª‰ªªÂãôÔºå ÈÄôÊòØ‰∏ÄÂÄãÂúãÈöõÂêà‰ΩúÁöÑÁ†îÁ©∂Ë®àÁï´ÔºåÁõÆÊ®ôÊòØÊé®Âãï ESG Ëá™ÂãïÂåñÊ™¢Ê∏¨ÊäÄË°ìÁôºÂ±ï„ÄÇ",
          team_label: "ÂèÉËàáÂúòÈöäÔºö",
          team_members: "Êó•Êú¨ÂúòÈöä„ÄÅÂè∞ÁÅ£Â§ßÂ≠∏„ÄÅËá∫ÂåóÂ§ßÂ≠∏",
          duration_label: "Â∞àÊ°àÊúüÈñìÔºö",
          duration: "2025Âπ¥3Êúà1Êó• - 2025Âπ¥5Êúà31Êó•Ôºà90Â§©Ë≥áÊñôÊ®ôË®ªÊúüÔºâ",
          importance_title: "ÁÇ∫‰Ωï ESG ÂêàË¶èÊÄßÈáçË¶ÅÔºü",
          stat1: "<strong>69% ÁöÑÊäïË≥áÂÖ¨Âè∏</strong>Â∑≤Â∞á ESG Ê®ôÊ∫ñÁ¥çÂÖ•Áõ£ÁÆ°ÂêàË¶èÁ≠ñÁï•",
          stat2: "ÂÖ®ÁêÉÂâç 250 Â§ß‰ºÅÊ•≠‰∏≠Ôºå<strong>96% Â∑≤ÈÄ≤Ë°å ESG Â†±Âëä</strong>",
          stat3:
            "2022 Âπ¥ÔºåÂÖ®ÁêÉ <strong>86% ÁöÑË≥áÁî¢ÁÆ°ÁêÜËÄÖ</strong>Â∑≤Â∞áÊ∞∏Á∫åÊäïË≥áÁ¥çÂÖ•ÂÖ∂ÊäïË≥áÁ≠ñÁï•",
          stat4: "‰∫ûÂ§™Âú∞ÂçÄ <strong>97% ÁöÑË≥áÁî¢ÁÆ°ÁêÜËÄÖ</strong>Â∑≤Â∞éÂÖ• ESG Á≠ñÁï•",
          trends_title: "‰∏âÂ§ß ESG ÂÖ®ÁêÉË∂®Âã¢",
          trend1_title: "ESG Êï¥ÂêàËá≥‰ºÅÊ•≠ÁáüÈÅã",
          trend1_desc: "Ë∂ä‰æÜË∂äÂ§ö‰ºÅÊ•≠Âú®Êó•Â∏∏ÁáüÈÅã‰∏≠ËûçÂÖ• ESG ÂéüÂâá",
          trend2_title: "ÊáâÂ∞çÊ∞£ÂÄôËÆäÈÅ∑",
          trend2_desc: "‰ºÅÊ•≠Êé°ÂèñÊõ¥Á©çÊ•µÁöÑÁí∞‰øùÊé™ÊñΩ‰æÜÂõ†ÊáâÂÖ®ÁêÉÊöñÂåñ",
          trend3_title: "Áõ£ÁÆ°Ê≥ïË¶èÊó•ÁõäÂö¥Ê†º",
          trend3_desc: "ÂêÑÂúãÊîøÂ∫úËàáÂúãÈöõÊ©üÊßãÂ∞ç ESG ÁöÑÁõ£ÁÆ°ÊåÅÁ∫åÂº∑Âåñ",
        },
        timeline: {
          title: "PROJECT TIMELINE Â∞àÊ°àÊôÇÁ®ã",
          meeting: "2025/02/26 (‰∏â) 20:30-21:00",
          meeting_desc: "Á¨¨‰∏ÄÊ¨°Á∑ö‰∏äË®éË´ñÊúÉË≠∞ - ML-ESG CR 2026",
          labeling: "2025/03/01 - 2025/05/31 (90 Days)",
          labeling_desc:
            "<strong>Ë≥áÊñôÊ®ôË®ªÈöéÊÆµ</strong> - ESG Â†±ÂëäÊ®ôÊ∫ñËàáÊï∏ÊìöÊ®ôË®ªÂ∑•‰Ωú",
          completion: "2025/06 - 2025/07",
          completion_desc: "ÂÆåÊàê ESG Â†±ÂëäÊ®ôË®ªÔºåÂª∫Á´ãÁ≤æÊ∫ñÁöÑ ESG Êï∏ÊìöÊ®°Âûã",
          conference: "2026/12",
          conference_desc: "ÂèÉËàá NTCIR-19 ÂúãÈöõÁ†îË®éÊúÉÔºåÁôºË°®Á†îÁ©∂ÊàêÊûú",
        },
        process: {
          title: "DATA LABELING PROCESS Êï∏ÊìöÊ®ôË®ªÊµÅÁ®ã",
          step: "Ê≠•È©ü",
          task: "Â∑•‰ΩúÂÖßÂÆπ",
          description: "Ë©≥Á¥∞Ë™™Êòé",
          step1_task: "Á¢∫Ë™ç ESG ÊåáÊ®ô‰ΩçÁΩÆ",
          step1_desc: "Á¢∫Ë™ç ESG ÊåáÊ®ôÂá∫ÁèæÁöÑÈ†ÅÈù¢",
          step2_task: "ÊåáÊ®ôÂàÜÈ°û",
          step2_desc: "ÈáèÂåñÊï∏ÊìöÔºàÊï∏Â≠ó„ÄÅÁôæÂàÜÊØîÔºâÊàñË®éË´ñ/ÂàÜÊûêÔºàÊñáÂ≠óÊèèËø∞Ôºâ",
          step3_task: "ÂñÆ‰ΩçÈ©óË≠â",
          step3_desc: "ÁôæÂàÜÊØîÔºà%Ôºâ„ÄÅË≤®Âπ£Ôºà$Ôºâ„ÄÅÊñáÂ≠óÊèèËø∞ÊàñÂÖ∂‰ªñÊï∏ÊìöÈ°ûÂûã",
          step4_task: "ÂêàË¶èÊÄßÁ¢∫Ë™ç",
          step4_desc: "Á¢∫‰øù ESG Â†±ÂëäÁ¨¶ÂêàÁõ£ÁÆ°Ë¶ÅÊ±Ç",
        },
        languages: {
          title: "MULTI-LANGUAGE SUPPORT Â§öË™ûË®ÄÊîØÊè¥",
          english: "Ëã±Êñá English",
          french: "Ê≥ïÊñá French",
          korean: "ÈüìÊñá Korean",
          chinese: "‰∏≠Êñá Chinese",
          japanese: "Êó•Êñá Japanese",
          thai: "Ê≥∞Êñá Thai",
        },
        highlights: {
          title: "RESEARCH HIGHLIGHTS Á†îÁ©∂ÈáçÈªû",
          analysis_title: "ESG Êï∏ÊìöÂàÜÊûê",
          analysis_desc: "Ê∑±Â∫¶ÂàÜÊûê‰ºÅÊ•≠ ESG Â†±ÂëäÂêàË¶èÊÄß",
          ai_title: "AI Ëá™ÂãïÂåñÊ™¢Ê∏¨",
          ai_desc: "ÈÅãÁî®Ê©üÂô®Â≠∏ÁøíÊäÄË°ìËá™ÂãïÊ™¢Ê∏¨",
          cooperation_title: "ÂúãÈöõÂêà‰Ωú",
          cooperation_desc: "ËàáÂ§öÂúãÂúòÈöäÂÖ±ÂêåÁ†îÁ©∂ÈñãÁôº",
          ntcir_title: "NTCIR Ë™çË≠â",
          ntcir_desc: "ÂúãÈöõÈ†ÇÁ¥öË≥áË®äÊ™¢Á¥¢Ë©ïÊ∏¨ÊúÉË≠∞",
        },
        cta: {
          title: "ÊúâËààË∂£ÂèÉËàáÂúãÈöõÂêà‰ΩúÁ†îÁ©∂Ë®àÁï´ÂóéÔºü",
          subtitle: "Ê≠°ËøéÂä†ÂÖ• ML-ESG CR 2026 Á†îÁ©∂ÂúòÈöä",
          button: "Ë®™Âïè NLPFin ÂÆòÊñπÁ∂≤Á´ô",
        },
        footer: {
          copyright: "ML-ESG Compliance Report ¬© 2025 | NTCIR-19 2025-2026",
          team: "Á†îÁ©∂ÂúòÈöäÔºöNLPFinÔºàËá™ÁÑ∂Ë™ûË®ÄËôïÁêÜÈáëËûçÁ†îÁ©∂Â∞èÁµÑÔºâ| ÂÆòÊñπÁ∂≤Á´ôÔºö",
        },
      },
    },
  },
};

// ========================================
// üîß Â∑•ÂÖ∑ÂáΩÊï∏
// ========================================

// ÊéíÂ∫èÂäüËÉΩ
function sortCards(container, order) {
  const cards = container.find(".flex-col").get();

  cards.sort(function (a, b) {
    const dateA_str = $(a)
      .find(".cert-date")
      .text()
      .match(/(\d{4}[\/-]\d{2}[\/-]\d{2})/);
    const dateB_str = $(b)
      .find(".cert-date")
      .text()
      .match(/(\d{4}[\/-]\d{2}[\/-]\d{2})/);
    const dateA = dateA_str
      ? new Date(dateA_str[1].replace(/\//g, "-"))
      : new Date();
    const dateB = dateB_str
      ? new Date(dateB_str[1].replace(/\//g, "-"))
      : new Date();
    return order === "asc" ? dateA - dateB : dateB - dateA;
  });

  container.empty();
  $(cards).appendTo(container);
}

// Ë≠âÁÖßÂ∞àÁî®ÊéíÂ∫è
function sortCertifications(order) {
  currentSortOrder = order;
  renderCertifications();
  updatePagination();
}

// Êõ¥Êñ∞Ë≠âÁÖßÁ∏ΩÊï∏È°ØÁ§∫
function updateCertCount() {
  const totalCount = certifications.length;
  $("#totalCertCount").text(totalCount);
}

// ÁîüÊàêË≠âÁÖßÂç°ÁâáHTML
function createCertCard(cert) {
  const titleAttr = cert.title.key ? `data-i18n="${cert.title.key}"` : "";
  const dateAttr = cert.date.key ? `data-i18n="${cert.date.key}"` : "";

  return `
        <div class="col-sm-6 col-md-4 flex-col">
            <div class="cert-card text-center">
                <button type="button" class="btn-card-link" data-bs-toggle="modal" 
                        data-bs-target="#${cert.modalId}" aria-label="Êü•ÁúãË≠âÁÖßË©≥ÊÉÖ">
                    <img src="${cert.image}" class="cert-img" alt="Ë≠âÁÖß" loading="lazy" />
                </button>
                <h4 class="cert-title" ${titleAttr}>${cert.title.default}</h4>
                <p class="cert-date" ${dateAttr}>${cert.date.default}</p>
            </div>
        </div>
    `;
}

// ÁîüÊàêË≠âÁÖßModal
function createCertModal(cert) {
  const titleAttr = cert.title.key ? `data-i18n="${cert.title.key}"` : "";
  const dateAttr = cert.date.key ? `data-i18n="${cert.date.key}"` : "";

  return `
        <div class="modal fade" id="${cert.modalId}" tabindex="-1" 
             aria-labelledby="${cert.modalId}Label" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered">
                <div class="modal-content text-center">
                    <div class="modal-header">
                        <h4 class="modal-title w-100" id="${cert.modalId}Label" ${titleAttr}>
                            ${cert.title.default}
                        </h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" 
                                aria-label="ÈóúÈñâ"></button>
                    </div>
                    <div class="modal-body">
                        <img src="${cert.image}" alt="Ë≠âÁÖßÂ§ßÂúñ" 
                             style="max-width: 100%; height: auto" />
                        <p class="mt-3" ${dateAttr}>${cert.date.default}</p>
                    </div>
                </div>
            </div>
        </div>
    `;
}

// Ê∏≤ÊüìË≠âÁÖß
function renderCertifications() {
  const sortedCerts = [...certifications].sort((a, b) => {
    const dateA = new Date(a.dateValue.replace(/\//g, "-"));
    const dateB = new Date(b.dateValue.replace(/\//g, "-"));
    return currentSortOrder === "asc" ? dateA - dateB : dateB - dateA;
  });

  $("#certifications .cert-page .row").empty();
  $("#certification-modals").empty();

  totalPages = Math.ceil(sortedCerts.length / 6);

  if (currentPage > totalPages) {
    currentPage = totalPages;
  }
  if (currentPage < 1) {
    currentPage = 1;
  }

  sortedCerts.forEach((cert, index) => {
    const pageNum = Math.floor(index / 6) + 1;
    let targetPage = $(`#certifications .cert-page[data-page="${pageNum}"]`);

    if (targetPage.length === 0) {
      const newPage = `<div class="cert-page" data-page="${pageNum}"><div class="row"></div></div>`;
      $("#certifications .cert-pagination-container").append(newPage);
      targetPage = $(`#certifications .cert-page[data-page="${pageNum}"]`);
    }

    targetPage.find(".row").append(createCertCard(cert));
    $("#certification-modals").append(createCertModal(cert));
  });

  updatePageIndicators();
  $("body").localize();
}

// Êõ¥Êñ∞ÂàÜÈ†ÅÊåáÁ§∫Âô®
function updatePageIndicators() {
  $("#certifications .cert-page-indicators").empty();

  for (let i = 1; i <= totalPages; i++) {
    const dotClass = i === currentPage ? "active" : "";
    const ariaSelected = i === currentPage ? "true" : "false";
    const dot = `<button class="page-dot ${dotClass}" data-page="${i}" 
                      role="tab" aria-label="Á¨¨ ${i} È†Å" 
                      aria-selected="${ariaSelected}"></button>`;
    $("#certifications .cert-page-indicators").append(dot);
  }

  $("#certifications .page-dot").on("click", function () {
    const targetPage = parseInt($(this).data("page"));
    jumpToPage(targetPage);
  });
}

// Êõ¥Êñ∞ÂàÜÈ†ÅÈ°ØÁ§∫
function updatePagination() {
  $("#certifications .cert-page").removeClass("active").hide();
  $(`#certifications .cert-page[data-page="${currentPage}"]`)
    .addClass("active")
    .show();

  $("#certifications .page-dot")
    .removeClass("active")
    .attr("aria-selected", "false");
  $(`#certifications .page-dot[data-page="${currentPage}"]`)
    .addClass("active")
    .attr("aria-selected", "true");

  $("#certPrevBtn").prop("disabled", currentPage === 1);
  $("#certNextBtn").prop("disabled", currentPage === totalPages);

  $("#pageJumpInput").val(currentPage);
  $("#pageJumpInput").attr("max", totalPages);

  $("#currentPageDisplay").text(currentPage);
  $("#totalPageDisplay").text(totalPages);

  const activePageHeight = $(
    `#certifications .cert-page[data-page="${currentPage}"]`
  ).outerHeight();
  $("#certifications .cert-pagination-container").css(
    "min-height",
    activePageHeight + "px"
  );
}

// È†ÅÊï∏Ë∑≥ËΩâÂäüËÉΩ
function jumpToPage(targetPage) {
  targetPage = parseInt(targetPage);

  if (targetPage < 1 || targetPage > totalPages || isNaN(targetPage)) {
    $("#pageJumpInput").addClass("error");
    setTimeout(function () {
      $("#pageJumpInput").removeClass("error");
      $("#pageJumpInput").val(currentPage);
    }, 1000);
    return false;
  }

  if (targetPage !== currentPage) {
    currentPage = targetPage;
    updatePagination();
    return true;
  }
  return false;
}

// ÂàùÂßãÂåñÂ∞àÊ°àÂàÜÈ†ÅÂäüËÉΩ
function initProjectPagination() {
  const projectsPerPage = 6;
  const totalProjects = 5;
  totalProjectPages = Math.ceil(totalProjects / projectsPerPage);

  const projectCountElement = document.getElementById("totalProjectCount");
  if (projectCountElement) {
    projectCountElement.textContent = totalProjects;
  }

  const projectPrevBtn = document.getElementById("projectPrevBtn");
  const projectNextBtn = document.getElementById("projectNextBtn");
  const projectPageIndicators = document.querySelector(
    "#recentworks .cert-page-indicators"
  );
  const projectPageJumpWrapper = document.querySelector(
    "#recentworks .page-jump-wrapper"
  );

  if (totalProjectPages <= 1) {
    if (projectNextBtn) projectNextBtn.style.display = "none";
    if (projectPageJumpWrapper) projectPageJumpWrapper.style.display = "none";
    const pageDots = projectPageIndicators?.querySelectorAll(".page-dot");
    if (pageDots) {
      pageDots.forEach((dot, index) => {
        if (index > 0) dot.style.display = "none";
      });
    }
  }

  function showProjectPage(page) {
    const projectPages = document.querySelectorAll(
      "#recentworks .project-page"
    );

    projectPages.forEach((pageElement) => {
      const pageNum = parseInt(pageElement.dataset.page);
      if (pageNum === page) {
        pageElement.classList.add("active");
        pageElement.style.display = "block";
        pageElement.style.opacity = "1";
        pageElement.style.transform = "translateX(0)";
      } else {
        pageElement.classList.remove("active");
        pageElement.style.display = "none";
        pageElement.style.opacity = "0";
      }
    });

    const pageDots = document.querySelectorAll("#recentworks .page-dot");
    pageDots.forEach((dot) => {
      const dotPage = parseInt(dot.dataset.page);
      if (dotPage === page) {
        dot.classList.add("active");
        dot.setAttribute("aria-selected", "true");
      } else {
        dot.classList.remove("active");
        dot.setAttribute("aria-selected", "false");
      }
    });

    if (projectPrevBtn) {
      projectPrevBtn.disabled = page === 1;
    }
    if (projectNextBtn) {
      projectNextBtn.disabled = page === totalProjectPages;
    }

    const currentPageDisplay = document.getElementById(
      "projectCurrentPageDisplay"
    );
    const totalPageDisplay = document.getElementById("projectTotalPageDisplay");
    const pageJumpInput = document.getElementById("projectPageJumpInput");

    if (currentPageDisplay) currentPageDisplay.textContent = page;
    if (totalPageDisplay) totalPageDisplay.textContent = totalProjectPages;
    if (pageJumpInput) {
      pageJumpInput.value = page;
      pageJumpInput.max = totalProjectPages;
    }

    currentProjectPage = page;
  }

  if (projectPrevBtn) {
    projectPrevBtn.addEventListener("click", () => {
      if (currentProjectPage > 1) {
        showProjectPage(currentProjectPage - 1);
      }
    });
  }

  if (projectNextBtn) {
    projectNextBtn.addEventListener("click", () => {
      if (currentProjectPage < totalProjectPages) {
        showProjectPage(currentProjectPage + 1);
      }
    });
  }

  const projectPageDots = document.querySelectorAll("#recentworks .page-dot");
  projectPageDots.forEach((dot) => {
    dot.addEventListener("click", () => {
      const page = parseInt(dot.dataset.page);
      showProjectPage(page);
    });
  });

  const projectPageJumpBtn = document.getElementById("projectPageJumpBtn");
  const projectPageJumpInput = document.getElementById("projectPageJumpInput");

  if (projectPageJumpBtn && projectPageJumpInput) {
    projectPageJumpBtn.addEventListener("click", () => {
      const targetPage = parseInt(projectPageJumpInput.value);
      if (targetPage >= 1 && targetPage <= totalProjectPages) {
        showProjectPage(targetPage);
        projectPageJumpInput.classList.remove("error");
      } else {
        projectPageJumpInput.classList.add("error");
        setTimeout(() => {
          projectPageJumpInput.classList.remove("error");
        }, 500);
      }
    });

    projectPageJumpInput.addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        projectPageJumpBtn.click();
      }
    });
  }

  showProjectPage(1);
}

// ========================================
// üöÄ Áµ±‰∏ÄÁöÑÊªæÂãïÂ∞éË¶ΩÂàóÊïàÊûú - ÂÆåÂÖ®‰øÆÊ≠£ÁâàÊú¨
// ========================================

// ÊªæÂãïÈÄ≤Â∫¶Ê¢ùÂäüËÉΩ
function createScrollProgress() {
  if (!$(".scroll-indicator").length) {
    $("body").prepend('<div class="scroll-indicator"></div>');
  }
}

function updateScrollProgress() {
  const scrollTop = $(window).scrollTop();
  const docHeight = $(document).height() - $(window).height();
  const scrollPercent = Math.min((scrollTop / docHeight) * 100, 100);
  $(".scroll-indicator").css("width", scrollPercent + "%");
}

// Áµ±‰∏ÄÁöÑÂ∞éË¶ΩÁãÄÊÖãÊõ¥Êñ∞ÂáΩÊï∏
function updateNavigation(sectionId) {
  console.log("üìç Êõ¥Êñ∞Â∞éË¶ΩÁãÄÊÖã:", sectionId);

  // ÁßªÈô§ÊâÄÊúâÊ¥ªË∫çÁãÄÊÖã
  $(".navbar .nav-link").removeClass("active");

  if (!sectionId || sectionId === "home") {
    // È†ÅÈù¢È†ÇÈÉ®ÊàñÈ¶ñÈ†Å
    $(
      `.navbar .nav-link[href="index.html"], .navbar .nav-link[href="#"]`
    ).addClass("active");
  } else {
    // ÁâπÂÆöÂçÄÂ°ä
    $(`.navbar .nav-link[href="#${sectionId}"]`).addClass("active");
  }
}

// Áç≤ÂèñÁï∂ÂâçÂçÄÂ°ä
function getCurrentSection() {
  const scrollTop = $(window).scrollTop();
  const windowHeight = $(window).height();
  let currentSection = "";
  let maxVisibility = 0;

  $("section[id]").each(function () {
    const $section = $(this);
    const sectionTop = $section.offset().top - 150;
    const sectionBottom = sectionTop + $section.outerHeight();

    // Ë®àÁÆóÂçÄÂ°äÂú®Ë¶ñÁ™ó‰∏≠ÁöÑÂèØË¶ãÂ∫¶
    const visibleTop = Math.max(scrollTop, sectionTop);
    const visibleBottom = Math.min(scrollTop + windowHeight, sectionBottom);
    const visibleHeight = Math.max(0, visibleBottom - visibleTop);
    const visibility =
      visibleHeight / Math.min(windowHeight, $section.outerHeight());

    if (visibility > maxVisibility && visibility > 0.3) {
      maxVisibility = visibility;
      currentSection = $section.attr("id");
    }
  });

  // Â¶ÇÊûúÊ≤íÊúâÊâæÂà∞‰∏îÂú®È†ÅÈù¢È†ÇÈÉ®
  if (!currentSection && scrollTop < 200) {
    currentSection = "home";
  }

  return currentSection;
}

// ‰∏ªÊªæÂãïËôïÁêÜÂáΩÊï∏
function handleScroll() {
  const scrollTop = $(window).scrollTop();

  // Êõ¥Êñ∞ÈÄ≤Â∫¶Ê¢ù
  updateScrollProgress();

  // Áç≤ÂèñÁï∂ÂâçÂçÄÂ°ä
  const currentSection = getCurrentSection();

  // Êõ¥Êñ∞Â∞éË¶ΩÂàóÁãÄÊÖã
  updateNavigation(currentSection);

  // Â∞éË¶ΩÂàóÊªæÂãïÊïàÊûú
  const navbar = $(".navbar");
  if (scrollTop > 50) {
    navbar.addClass("scrolled");
  } else {
    navbar.removeClass("scrolled");
  }
}

// Âπ≥ÊªëÊªæÂãïÂà∞ÊåáÂÆö‰ΩçÁΩÆ
function smoothScrollTo(target, offset = 100) {
  if (target && target.length) {
    $("html, body").animate(
      {
        scrollTop: target.offset().top - offset,
      },
      800,
      "swing"
    );
  }
}

// È†ÅÈù¢ËºâÂÖ•ÊôÇË®≠ÁΩÆÊ≠£Á¢∫ÁöÑÊ¥ªË∫çÁãÄÊÖã
function updateNavOnLoad() {
  const hash = window.location.hash;
  console.log("üîó È†ÅÈù¢ËºâÂÖ•ÊôÇÁöÑ hash:", hash);

  if (hash) {
    const sectionId = hash.substring(1);
    updateNavigation(sectionId);

    // Âª∂ÈÅ≤ÊªæÂãïÂà∞ÁõÆÊ®ô‰ΩçÁΩÆ
    setTimeout(() => {
      const target = $(hash);
      if (target.length) {
        smoothScrollTo(target);
      }
    }, 300);
  } else {
    updateNavigation("home");
  }
}

// ========================================
// üéâ ‰∏ªË¶ÅÂàùÂßãÂåñÂáΩÊï∏
// ========================================

$(document).ready(function () {
  console.log("üöÄ ÂÆåÊï¥Á≥ªÁµ±ÂàùÂßãÂåñÈñãÂßã...");

  // ========================================
  // 1. ÊªæÂãïÂäüËÉΩÂàùÂßãÂåñ
  // ========================================

  // ÂâµÂª∫ÊªæÂãïÈÄ≤Â∫¶Ê¢ù
  createScrollProgress();

  // üöÄ ÊâãÂãïÊéßÂà∂Â∞éË¶ΩÂàóÂõ∫ÂÆöÊïàÊûú - Êõ¥ÂèØÈù†ÁöÑÊñπÊ°à
  function initStickyNavbar() {
    const navbar = $(".navbar");
    const header = $("#header");

    if (!navbar.length || !header.length) return;

    // Ë®àÁÆóÂ∞éË¶ΩÂàóÂéüÂßã‰ΩçÁΩÆ
    const navbarOffsetTop = navbar.offset().top;
    const navbarHeight = navbar.outerHeight();

    console.log("üéØ Â∞éË¶ΩÂàóÂéüÂßã‰ΩçÁΩÆ:", navbarOffsetTop);

    // ÁÇ∫ body È†êÁïôÁ©∫ÈñìÂÖÉÁ¥†ÔºàÁï∂Â∞éË¶ΩÂàóËÆä fixed ÊôÇ‰ΩøÁî®Ôºâ
    if (!$("#navbar-spacer").length) {
      $('<div id="navbar-spacer"></div>').insertBefore(navbar);
    }

    function handleNavbarFixed() {
      const scrollTop = $(window).scrollTop();

      if (scrollTop >= navbarOffsetTop) {
        // ÊªæÂãïË∂ÖÈÅéÂ∞éË¶ΩÂàó‰ΩçÁΩÆÔºåÂõ∫ÂÆöÂ∞éË¶ΩÂàó
        if (!navbar.hasClass("navbar-is-fixed")) {
          navbar.addClass("navbar-is-fixed");
          $("#navbar-spacer").height(navbarHeight);
          console.log("üîí Â∞éË¶ΩÂàóÂ∑≤Âõ∫ÂÆö");
        }
      } else {
        // ÊªæÂãïÂõûÂà∞È†ÇÈÉ®ÔºåÊÅ¢Âæ©Ê≠£Â∏∏‰ΩçÁΩÆ
        if (navbar.hasClass("navbar-is-fixed")) {
          navbar.removeClass("navbar-is-fixed");
          $("#navbar-spacer").height(0);
          console.log("üîì Â∞éË¶ΩÂàóÂ∑≤Ëß£Èô§Âõ∫ÂÆö");
        }
      }
    }

    // Á∂ÅÂÆöÊªæÂãï‰∫ã‰ª∂
    $(window).on("scroll.navbar", handleNavbarFixed);

    // ÂàùÂßãÊ™¢Êü•
    handleNavbarFixed();
  }

  // ÂàùÂßãÂåñÂõ∫ÂÆöÂ∞éË¶ΩÂàó
  initStickyNavbar();

  // Âπ≥ÊªëÊªæÂãïÂäüËÉΩ
  $('a[href^="#"]').on("click", function (e) {
    const targetHref = $(this).attr("href");
    const target = $(targetHref);

    console.log("üéØ ÈªûÊìäÂ∞éË¶ΩÈÄ£Áµê:", targetHref);

    if (target.length) {
      e.preventDefault();

      // ÂÖàÊõ¥Êñ∞Â∞éË¶ΩÂàóÁãÄÊÖã
      const sectionId = targetHref.substring(1);
      updateNavigation(sectionId);

      // Âπ≥ÊªëÊªæÂãï
      smoothScrollTo(target);
    }
  });

  // ÊªæÂãïÁõ£ËÅΩ - ‰ΩøÁî®ÁØÄÊµÅÊèêÂçáÊÄßËÉΩ
  $(window).on("scroll", function () {
    if (scrollThrottleTimer) return;

    scrollThrottleTimer = setTimeout(() => {
      handleScroll();
      scrollThrottleTimer = null;
    }, 16); // ~60fps
  });

  // È¶ñÈ†ÅÊåâÈàïÁâπÊÆäËôïÁêÜ
  $('.navbar-brand, a[href="index.html"], a[href="#"]').on(
    "click",
    function (e) {
      // Â¶ÇÊûúÂ∑≤Á∂ìÂú®È¶ñÈ†ÅÔºåÂπ≥ÊªëÊªæÂãïÂà∞È†ÇÈÉ®
      if (
        window.location.pathname.includes("index.html") ||
        window.location.pathname === "/"
      ) {
        e.preventDefault();
        updateNavigation("home");
        $("html, body").animate({ scrollTop: 0 }, 800);
      }
    }
  );

  // Áõ£ËÅΩ hash ËÆäÂåñ
  $(window).on("hashchange", function () {
    const hash = window.location.hash;
    if (hash) {
      updateNavigation(hash.substring(1));
    } else {
      updateNavigation("home");
    }
  });

  // ========================================
  // 2. ÂúãÈöõÂåñÂäüËÉΩÂàùÂßãÂåñ
  // ========================================

  // Áµ±‰∏ÄÁöÑ HTML ÁøªË≠ØËôïÁêÜÂáΩÊï∏
  function processHTMLTranslations() {
    $("[data-i18n]").each(function () {
      const $this = $(this);
      const key = $this.attr("data-i18n");
      if (key) {
        const translatedText = i18next.t(key);
        if (
          translatedText.includes("<strong>") ||
          translatedText.includes("<br>") ||
          translatedText.includes("<br />") ||
          translatedText.includes("<a ") ||
          translatedText.includes("</a>")
        ) {
          $this.html(translatedText);
        }
      }
    });
  }

  // ÂàùÂßãÂåñi18next
  i18next.init(
    {
      lng: "en",
      debug: false,
      resources: resources,
      interpolation: { escapeValue: false },
    },
    function (err, t) {
      jqueryI18next.init(i18next, $);
      $("body").localize();
      setTimeout(function () {
        processHTMLTranslations();
      }, 100);
    }
  );

  // Ë™ûË®ÄÂàáÊèõÊåâÈàï
  $("#btn-en").on("click", function () {
    i18next.changeLanguage("en", function () {
      $("body").localize();
      setTimeout(function () {
        processHTMLTranslations();
      }, 50);
    });
  });

  $("#btn-zh").on("click", function () {
    i18next.changeLanguage("zh", function () {
      $("body").localize();
      setTimeout(function () {
        processHTMLTranslations();
      }, 50);
    });
  });

  // ========================================
  // 3. Ë≠âÁÖßËàáÂàÜÈ†ÅÂäüËÉΩÂàùÂßãÂåñ
  // ========================================

  // ÊéíÂ∫èÊåâÈàï‰∫ã‰ª∂
  $(".btn-sort").on("click", function () {
    const order = $(this).data("sort");
    const section = $(this).closest("section");

    $(this)
      .siblings(".btn-sort")
      .removeClass("active")
      .attr("aria-pressed", "false");
    $(this).addClass("active").attr("aria-pressed", "true");

    if (section.attr("id") === "certifications") {
      sortCertifications(order);
    } else {
      const cardsContainer = section.find(".row").last();
      sortCards(cardsContainer, order);
    }
  });

  // ÂàùÂßãÂåñË≠âÁÖßÂäüËÉΩ
  currentSortOrder = "desc";
  renderCertifications();
  updateCertCount();

  // Ë≠âÁÖßÂàÜÈ†Å‰∫ã‰ª∂ËôïÁêÜ
  $("#certPrevBtn").on("click", function () {
    if (currentPage > 1) {
      currentPage--;
      updatePagination();
    }
  });

  $("#certNextBtn").on("click", function () {
    if (currentPage < totalPages) {
      currentPage++;
      updatePagination();
    }
  });

  // È†ÅÊï∏Ë∑≥ËΩâÂäüËÉΩ
  $("#pageJumpBtn").on("click", function () {
    const targetPage = parseInt($("#pageJumpInput").val());
    jumpToPage(targetPage);
  });

  $("#pageJumpInput").on("keypress", function (e) {
    if (e.which === 13) {
      const targetPage = parseInt($(this).val());
      jumpToPage(targetPage);
    }
  });

  $("#pageJumpInput").on("input", function () {
    const value = parseInt($(this).val());
    if (value < 1 || value > totalPages || isNaN(value)) {
      $(this).addClass("invalid");
    } else {
      $(this).removeClass("invalid");
    }
  });

  // ÈçµÁõ§ÊîØÊè¥ÔºàÂ∑¶Âè≥ÁÆ≠È†≠Ôºâ
  $(document).on("keydown", function (e) {
    if (
      $("#certifications").is(":visible") &&
      !$("#pageJumpInput").is(":focus")
    ) {
      if (e.keyCode === 37 && currentPage > 1) {
        currentPage--;
        updatePagination();
      } else if (e.keyCode === 39 && currentPage < totalPages) {
        currentPage++;
        updatePagination();
      }
    }
  });

  // ========================================
  // 4. ÂÖ∂‰ªñÂäüËÉΩÂàùÂßãÂåñ
  // ========================================

  // Ë®≠ÂÆöÈ†êË®≠ÊéíÂ∫è
  $(".sort-controls").each(function () {
    const section = $(this).closest("section");
    const descButton = $(this).find('.btn-sort[data-sort="desc"]');

    descButton.addClass("active").attr("aria-pressed", "true");
    descButton
      .siblings(".btn-sort")
      .removeClass("active")
      .attr("aria-pressed", "false");

    if (section.attr("id") !== "certifications") {
      const cardsContainer = section.find(".row").last();
      sortCards(cardsContainer, "desc");
    }
  });

  // ÂàùÂßãÂåñÂàÜÈ†Å
  updatePagination();

  // ÂàùÂßãÂåñÂ∞àÊ°àÂàÜÈ†Å
  if (document.getElementById("recentworks")) {
    initProjectPagination();
  }

  // ========================================
  // 5. ESG È†ÅÈù¢ÁâπÂÆöÂäüËÉΩ
  // ========================================

  if (window.location.pathname.includes("ESG.html")) {
    const observerOptions = {
      threshold: 0.1,
      rootMargin: "0px 0px -50px 0px",
    };

    const observer = new IntersectionObserver(function (entries) {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = "1";
          entry.target.style.transform = "translateY(0)";
        }
      });
    }, observerOptions);

    // ÁÇ∫ÊôÇÈñìËª∏È†ÖÁõÆÊ∑ªÂä†ÂãïÁï´
    document.querySelectorAll(".timeline-item").forEach((item, index) => {
      item.style.opacity = "0";
      item.style.transform = "translateY(20px)";
      item.style.transition = `all 0.6s ease ${index * 0.1}s`;
      observer.observe(item);
    });

    // ÁÇ∫ÂúòÈöäÂç°ÁâáÊ∑ªÂä†ÂãïÁï´
    document.querySelectorAll(".team-card").forEach((card, index) => {
      card.style.opacity = "0";
      card.style.transform = "translateY(20px)";
      card.style.transition = `all 0.6s ease ${index * 0.1}s`;
      observer.observe(card);
    });

    // ÁÇ∫Á†îÁ©∂ÈáçÈªûÂç°ÁâáÊ∑ªÂä†ÂãïÁï´
    document.querySelectorAll(".highlight-card").forEach((card, index) => {
      card.style.opacity = "0";
      card.style.transform = "translateY(20px)";
      card.style.transition = `all 0.6s ease ${index * 0.1}s`;
      observer.observe(card);
    });

    // ÁÇ∫ ESG ÂçÄÂ°äÊ∑ªÂä†ÂãïÁï´
    document.querySelectorAll(".esg-section").forEach((section, index) => {
      section.style.opacity = "0";
      section.style.transform = "translateY(30px)";
      section.style.transition = `all 0.8s ease ${index * 0.2}s`;
      observer.observe(section);
    });
  }

  // ========================================
  // 6. ÊúÄÁµÇÂàùÂßãÂåñ
  // ========================================

  // Âº∑Âà∂Êõ¥Êñ∞Â∞àÊ°àÁ∏ΩÊï∏
  setTimeout(function () {
    const actualProjectCount = $("#recentworks .project-card").length;
    $("#totalProjectCount").text(actualProjectCount);
    console.log("üìä ÂØ¶ÈöõÂ∞àÊ°àÊï∏Èáè:", actualProjectCount);
  }, 500);

  // È†ÅÈù¢ÂÆåÂÖ®ËºâÂÖ•ÂæåÁöÑÂàùÂßãÂåñ
  $(window).on("load", function () {
    updateNavOnLoad();
    handleScroll(); // Ëß∏ÁôºÂàùÂßãÊªæÂãïÊ™¢Êü•
    console.log("‚úÖ ÊâÄÊúâÂäüËÉΩÂàùÂßãÂåñÂÆåÊàêÔºÅÊªæÂãïÂ∞éË¶ΩÂ∑≤ÂïüÁî®ÔºÅ");
  });

  // Á´ãÂç≥Âü∑Ë°åÂàùÂßãË®≠ÁΩÆ
  updateNavOnLoad();

  console.log("üéâ Á≥ªÁµ±ÂàùÂßãÂåñÂÆåÊàêÔºÅ");
});
